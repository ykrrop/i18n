# Frontend-приложение международной конференции

Некоторая компания Альт готовится к проведению международной конференции, которая позволит специалистам обменяться знаниями и опытом, а компаниям — нанять высококвалифицированных разработчиков. Успех мероприятия во многом зависит от первого впечатления, которое произведет внешний вид нашего сайта конференции. К этому событию у нас уже есть готовый проект, но он не предназначался для международной аудитории.

Вам предстоит подготовить этот проект к отображению на следующих языках: русский (ru), английский (en), арабский (ar). Далее эти языки считаются поддерживаемыми в данном проекте.

Для привлечения внимания к конференции на сайт добавлены тематические статьи. Также мы хотим уделить особое внимание привлечению специалистов из России, Беларуси и Казахстана, поэтому для этих стран были написаны статьи специально для них, которые должны отображаться только пользователям из соответствующих стран.

### Что должно получиться:

1. При указании в URL-пути локали с поддерживаемым языком и открытии любой страницы приложения (например, http://127.0.0.1:3000/ru-KZ/article/rtl-icons), интерфейс должен отображаться на соответствующем языке. В зависимости от региона пользователя, который содержится в локали, на главной странице в блоке "Актуально для вашего региона" должны отображаться различные статьи. Функция получения статьи в зависимости от локали `getRegionArticleByLocale` находится в компоненте стартовой страницы [`Home.tsx`](./src/pages/home/Home.tsx)

2. Интерфейс приложения должен ожидаемо отображаться в соответствующем для каждого языка направлении потока текста (слева-направо, справа-налево). Важно адаптировать не только сам интерфейс, но и контент страниц

3. В URL в виде локали должен учитываться язык и регион пользователя:
    - в проекте есть моковая реализация геобазы [`geo-service.ts`](./src/lib/geo-service.ts), ее нужно использовать для определения региона пользователя. Также для тестирования при разработке геобаза поддерживает переопределение региона пользователя через query-параметр `devOverrideRegion`
    - при определении языка пользователя должна выполняться следующая последовательность приоритетов - `язык из локали в URL` -> `язык из куки i18n-l10n-conf-lang` -> `язык браузера` -> `язык по умолчанию`. Языком по умолчанию считаем `en`
    - в случае если регион пользователя не совпадает с тем, что находится в `URL`, то должен произойти редирект на регион, определенный геобазой (пользователь пришел по ссылке `ru-KZ` из регона `RU`, соответственно должен быть редирект на `ru-RU`)
    - если регион пользователя для текущего языка не поддерживается - то он должен отсутствовать в `URL`. Например, если пользователь с регионом `US` пришел по урлу `ru-US`, то должен быть редирект на `ru`. Если пользователь с регионом `UZ` пришел по урлу `uz-UZ`, а в его браузере установлен язык `ru` и значение куки отсутствует, то должен произойти редирект на `ru`. Список поддерживаемых локалей находится [здесь](./src/constants/index.ts)
    - если язык в урле не указан или не поддерживается, то должен быть редирект на определенный нами язык

4. В собранном для продакшена бандле приложения не должно быть исходных текстов на русском языке (то есть, при открытии страницы приложения на английским языке в загружаемых данных должны отсутствовать исходные тексты на русском)

5. В продакшн версии сайта должны использоваться скомпилированные formatjs переводы и должен быть отключен парсер ICU во время сборки

6. Для каждой страницы приложения должны загружаться только необходимые для данной страницы переводы (а не все сразу)

7. Нужно доработать компонент выбора языка [`lang-select`](./src/components/lang-select/), чтобы при выборе языка открывалась страница на этом языке

### Условия:

- используйте в проекте Code First подход к переводам
- переводы нужно брать из файла [`translations.json`](./translations.json) в корне проекта, никакие другие переводы использовать не нужно (а также разбивать текст переводов у ключей на отдельные части)
- название бренда для текущего языка нужно брать из файла [`brand-names.ts`](./src/constants/brand-names.ts)
- список ключей переводов, используемых на каждой странице, находится в файле [`src/page-translation-keys.ts`](./src/page-translation-keys.ts)
- все числовые значения (дата, время и т.д.) должны отображаться с использованием привычных для нас обычных (десятичных) арабских цифр для всех языков (например, 2025, а не индо-арабские ٢٠٢٤)
- текстовые сообщения должны использовать ICU разметку
- должны проходить линтеры по команде `npm run lint`
- приложение должно собираться и работать по командам `npm run build` и `npm run preview`

### Ограничения:

- версия Node.js - 20.14.0
- можно использовать только пакеты, указанные в `package.json`
- не удаляйте `data-testid` атрибуты и не меняйте текущую структуру html-элементов приложения
- текущий язык отображения интерфейса **всегда** должен присутствовать в URL-пути (например, http://127.0.0.1:3000/en/article/rtl-icons или http://127.0.0.1:3000/ru-RU)
- тесты будут запускаться в браузере Desktop Chrome версии 125

### Что нужно сделать:

1.  Для интернационализации проекта используйте библиотеку `react-intl` от [Format.JS]. Не используйте самописные решения или различные самописные обертки над `react-intl`

2.  Для удаления исходных текстов на русском языке используйте babel плагин [babel-plugin-formatjs][babel-plugin-formatjs | Format.JS]

3.  На арабском языке приложение должно отображаться с направлением потока текста справа-налево (rtl), а на русском и английском языках - слева-направо (ltr)

4.  Использовать [компиляцию переводов][Advanced Usage | Format.JS] для уменьшения размера бандла приложения

### Как сдавать:

Загрузите архив с решением в формате `.zip`. В корне этого архива сразу должны находится файлы приложения (то есть располагаться `package.json`) без вложенной поддиректории. Также из отправляемого архива необходимо удалить папку `node_modules`. При проверке вашего решения для запуска приложения будут использоваться команды `npm run build` и `npm run preview`, перед отправкой убедитесь, что они работают

Скачать исходный проект можно по [ссылке](https://disk.yandex.ru/d/-Oi6RSOz4puVPg)

### Полезная информация

Различные переменные, которые возможно понадобятся при решении, находятся в директории [`constants`](./src/constants/index.ts).

Если вы ощущаете, что для решения нужно будет сделать много однотипных действий, подумайте, можно ли их как-то автоматизировать. Возможно стоит посмотреть в зависимости проекта. Также приветствуется использования ИИ (с последующей ручной валидацией) для решения таких однотипных действий.

### Полезные ссылки:

[Format.JS]

[babel-plugin-formatjs | Format.JS]

[Advanced Usage | Format.JS]

[Format.JS]: https://formatjs.io/
[babel-plugin-formatjs | Format.JS]: https://formatjs.github.io/docs/tooling/babel-plugin
[Advanced Usage | Format.JS]: https://formatjs.github.io/docs/guides/advanced-usage
